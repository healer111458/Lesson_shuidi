# 计算机网络基础

## 互联网概述，计算机网络体系结构

### 互连网与互联网的区别

    - 互连网
        1. 与网络相连的计算机称为主机。智能手机也可以称为主机。
        2. 结点可以是计算机，集成器，交换机，路由器等。
        3. 计算机网络（简称网络）由若干结点和连接这些结点的链路组成。
        4. 互连网：网络之间可以通过路由器互连起来，这就构成一个覆盖范围更大的计算机网络。
        5. 互连网是“网络的网络”，泛指由多个计算机网络互连而成的计算机网络。网络把许多计算机连接在一起。而互连网把许多网络通过路由器连接在一起。

    - 互联网
        1. 也叫做因特网，不过现在不用了。
        2. 互联网(专有名词)：指当前全球最大的，开放的，由众多网络相互连接而成的特定互连网。
        3. 这也是为什么1994年中国接入互联网叫做接入，而不是其他动词。
        4. 采用TCP/IP协议族作为通信的规则，前身是ARPANET。

    总结
        计算机，交换机，路由器等 = 结点
        结点 + 链路 = 网络
        网络 + 网络 = 互连网
        互联网 = 全球最大的互连网

### 互联网的组成
    从工作方式可以分为两大块：边缘部分 + 核心部分。

        边缘部分：由所有连接在互联网上的主机组成，用户直接使用。
        核心部分：由大量网络和连接这些网络的路由器组成。

    - 边缘部分的通信方式:
        客户-服务器方式（C/S）。客户是服务请求方，服务器是服务提供方。
        对等连接方式（P2P）。两台主机通信并不区分哪一个是服务请求方哪一个是提供方。只要两台主机都运行了对等连接软件就可以通信，相互下载对方硬盘里面的文档。

    - 核心部分的通信方式:
        路由器。它是一种专用计算机。路由器是实现分组交换的关键构件，其任务是转发收到的分组。

    - 何为分组交换:
        电路交换： 建立连接（占用通信资源） -> 通话（一直占用通信资源） -> 释放连接（归还通信资源）。在通话的全部时间里，通话的两个用户始终占用端到端的通信资源。
       
        分组交换：采用存储转发技术。要发送整块数据，这块数据被称为一个报文。在发送之前，把报文分成一个个更小的等长数据段，并在头部加上包头。
       
        （首部 + 数据 = 分组）X （很多个） = 报文
       
        路由器的作用就是用来转发这些分组的。路由器收到一个分组，先暂存一下，检查头部，查找转发表，交给下一个路由器，一步一步以存储转发的方式给目的主机。分组交换在传输数据之前不必占用一条端到端的通信资源，并且省去了建立连接和释放连接的开销，传输数据效率更高.
   
    总结
        电路交换。整个报文连续从源点到终点，好像在一个管道中传送。适合大量数据传输。
        报文交换。整个报文先到达相邻结点，全部储存下来查找转发表，转发到下一个结点。
        分组交换。单个分组（整个报文的一小部分）传送给相邻结点，存储下来后查找转发表，转发到下一个结点。（原理采用报文交换）灵活。

### 七层协议和四层协议的由来

    - *协议与划分层次
        在计算机网络要做到有条不紊的交换数据，就必须遵守实现约好的规则。这些为进行网络中的数据交换而建立的规则，标准，约定称之为网络协议，也可简称为协议。协议有三要素。
       
        *协议三要素:
            语法。数据与控制信息的结构或格式。
            语义。即需要发出何种控制信息，完成何种动作以及做出何种响应。
            同步。事件实现顺序的详细说明。
   
    - 四层协议
       
        应用层:是体系结构的最高层。任务是通过应用进程间的交互来完成特定网络应用。应用层定义的是应用进程间通信和交互的规则。在互联网的应用层协议很多，如域名系统NDS，支持万维网应用的HTTP协议，支持电子邮件的SMTP协议。我们把应用层交互的数据单元称为报文。
       
        运输层:负责两台主机中进程之间的通信提供通用的数据传输服务。
            主要使用两种协议:
               
                传输控制协议TCP:数据传输的单位是报文段。
               
                用户数据报协议UDP:提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性），数据传输的单位是用户数据报。
        网络层:
            负责为分组交换网上的不同主机提供通信服务。在发送数据时，网络层把运输层产生的报文段或用户数据封装成分组（小报文）或包进行传送。网络层的另外一个任务就是要选择合适的路由，使源主机运输层所传下来的分组（小报文）能够通过路由器找到目的的主机。IP协议。
        数据链路层（链路层）:
            两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要专门的链路层协议。在两个相邻结点之间传送数据时，数据链路层把网络层交下来的IP数据报组装成帧，在两个相邻结点的链路上传送帧，每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制）在接收数据时，接收到一个帧，抽出数据部分，提交给网络层。

### 两个主机之间通信的全过程
    - 主机A向主机B传输数据:
        1. 主机A把数据给应用层，应用层加上必要的控制信息。
        2. 应用层的数据再给运输层，运输层再加上控制信息。
        3. 运输层的数据给网络层，网络层再加上控制信息。
        4. 网络层的数据给链路层，链路层给数据加上首部和尾部。
        5. 链路层再把数据给物理层，物理层传输单位是比特，不加控制信息。
        6. 接着数据到达路由器，路由器分析控制信息。
        7. 路由器的分组（小报文）传给主机B的物理层。
        8. 物理层再传给链路层，链路层分析控制信息并剥去，找到上层的网络层。
        9. 网络层接收到数据，分析控制信息并剥去，找到上层的运输层。
        10. 运输层接收到信息，分析并剥去控制信息，找到应用层。
        11. 应用层剥去控制信息，把数据给主机B。
   
    用一个简单的例子描述：
        一封信从最高层向下传，每经过一层就包上一个新的信封，写上必要的地址信息。到达最底层时，向上传，每经过一层就剥去一层信封，到达最高层的时候，去取出发信人的信交给收信人就可以了。